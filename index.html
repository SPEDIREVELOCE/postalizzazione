<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Gestione Raccomandate</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <h1>Gestione Raccomandate</h1>

    <h2>Nuova Raccomandata</h2>
    <form id="raccomandataForm">
        <h3>Mittente</h3>
        <input type="text" id="sender_name" placeholder="Nome" required><br>
        <input type="text" id="sender_surname" placeholder="Cognome" required><br>
        <input type="text" id="sender_street" placeholder="Via" required><br>
        <input type="text" id="sender_number" placeholder="Civico" required><br>
        <input type="text" id="sender_zip" placeholder="CAP" required><br>
        <input type="text" id="sender_city" placeholder="Città" required><br>

        <h3>Destinatario</h3>
        <input type="text" id="recipient_name" placeholder="Nome" required><br>
        <input type="text" id="recipient_surname" placeholder="Cognome" required><br>
        <input type="text" id="recipient_street" placeholder="Via" required><br>
        <input type="text" id="recipient_number" placeholder="Civico" required><br>
        <input type="text" id="recipient_zip" placeholder="CAP" required><br>
        <input type="text" id="recipient_city" placeholder="Città" required><br>

        <button type="submit">Genera Documenti</button>
    </form>

    <div id="documents" style="display:none;">
        <h2>Ricevuta di Accettazione</h2>
        <div class="doc" id="acceptance">
            <p><strong>Mittente:</strong> <span id="a_sender"></span></p>
            <p><strong>Destinatario:</strong> <span id="a_recipient"></span></p>
            <p><strong>Numero raccomandata:</strong> <span id="a_code"></span></p>
            <p><strong>Data accettazione:</strong> <span id="a_date"></span></p>
            <button onclick="printSection('acceptance')">Stampa</button>
            <button onclick="downloadPDF('acceptance','Ricevuta_Accettazione')">Scarica PDF</button>
        </div>

        <h2>Etichetta</h2>
        <div class="doc" id="label" style="text-align:center;">
            <svg id="barcode"></svg>
            <p id="l_code"></p>
            <p id="l_date" style="font-size:12px;"></p>
            <button onclick="printSection('label')">Stampa</button>
            <button onclick="downloadPDF('label','Etichetta')">Scarica PDF</button>
        </div>

        <h2>Ricevuta di Ritorno</h2>
        <div class="doc" id="return">
            <p><strong>Mittente:</strong> <span id="r_sender"></span></p>
            <p><strong>Destinatario:</strong> <span id="r_recipient"></span></p>
            <p><strong>Numero raccomandata:</strong> <span id="r_code"></span></p>
            <p><strong>Data accettazione:</strong> <span id="r_date"></span></p>
            <button onclick="printSection('return')">Stampa</button>
            <button onclick="downloadARPDF()">Scarica PDF AR</button>
        </div>
    </div>

    <h2>Storico Raccomandate</h2>
    <table id="storico">
        <thead>
            <tr>
                <th>Numero</th>
                <th>Mittente</th>
                <th>Destinatario</th>
                <th>Data</th>
                <th>Azioni</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script src="script.js"></script>
</body>
</html>
